version: "3.8"

services:
  blog-bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: blog-bot
    volumes:
      - ./deploy-key:/app/deploy-key:ro
      - blog-repo:/app/repo
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - TELEGRAM_USER_ID=${TELEGRAM_USER_ID}
      - BLOG_REPO_PATH=/app/repo
      - GIT_REPO_URL=${GIT_REPO_URL:-git@github.com:cargaona/blog.git}
    restart: unless-stopped

volumes:
  blog-repo:
    name: blog-repo
